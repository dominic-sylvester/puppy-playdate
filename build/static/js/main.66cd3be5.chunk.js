(this["webpackJsonppuppy-playdate"]=this["webpackJsonppuppy-playdate"]||[]).push([[0],{42:function(e,t,n){e.exports=n(55)},47:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),i=n.n(o),c=(n(47),n(9)),u=n.n(c),s=n(12),l=n(37),p=n(87),f=n(81),m=n(85),d=n(88),y=n(29),h=n.n(y);function x(e,t,n){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(u.a.mark((function e(t,n,a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://puppy-playdate.us-west-2.aws.cloud.dgraph.io/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,operationName:n,variables:a})});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=n(32),b=n.n(g),w=300,E=2,k=.2,C=50,N=function(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("width"),a=Number(n.split("px")[0]),r=t.getPropertyValue("height");return{x:a,y:Number(r.split("px")[0])}},S=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},D=function(){var e=Object(s.a)(u.a.mark((function e(t,n){var a,r,o,i,c,s,l,p,f,m,d=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>2&&void 0!==d[2]&&d[2],r=L(t),o=N(document.body),i=S(o.x,o.y),c=S(n.x,n.y),s=i/c,l=i/c,p=O(n.x*l+r.x,-n.y*l+r.y),f="",m=200,t.style.transition=a?"ease "+s+"s":"ease-out "+s+"s",f=0===A(t)?T((Math.random()-.5)*m):A(t)>0?T(Math.random()*m/2+A(t)):T((Math.random()-1)*m/2+A(t)),t.style.transform=p+f,e.next=15,b()(1e3*s);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(e){e.style.transition=w+"ms";var t=L(e),n=O(t.x*-k,t.y*-k),a=T(A(e)*-k);e.style.transform=n+a,setTimeout((function(){e.style.transform="none"}),.75*w),setTimeout((function(){e.style.transition="10ms"}),w)},j=function(e){return Math.abs(e.x)>Math.abs(e.y)?e.x>0?"right":"left":e.y>0?"up":"down"},P=function(e,t){var n=t.x-e.x,a=e.y-t.y,r=(t.time-e.time)/1e3;return{x:n/r,y:a/r}},O=function(e,t){return"translate("+e+"px, "+t+"px)"},T=function(e){return"rotate("+e+"deg)"},L=function(e){var t=window.getComputedStyle(e),n=new WebKitCSSMatrix(t.webkitTransform);return{x:n.m41,y:n.m42}},A=function(e){var t=window.getComputedStyle(e),n=new WebKitCSSMatrix(t.webkitTransform);return-Math.asin(n.m21)/(2*Math.PI)*360},W=function(e,t,n,a){var r={x:e.x+n.x,y:e.y+n.y},o={x:r.x,y:r.y,time:(new Date).getTime()},i=O(r.x,r.y),c=P(a,o).x/1e3,u=T(c*E);return t.style.transform=i+u,o},q=function(e){var t=e.targetTouches[0];return{x:t.clientX,y:t.clientY}},B=function(e){return{x:e.clientX,y:e.clientY}},F=r.a.forwardRef((function(e,t){var n,a=e.flickOnSwipe,o=void 0===a||a,i=e.children,c=e.onSwipe,l=e.onCardLeftScreen,p=e.className,f=e.preventSwipe,m=void 0===f?[]:f,d=r.a.useRef(!1);r.a.useImperativeHandle(t,(function(){return{swipe:function(){var e=arguments;return Object(s.a)(u.a.mark((function t(){var a,r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:"right",c&&c(a),r=1e3,o=100*(Math.random()-.5),"right"!==a){t.next=9;break}return t.next=7,D(n,{x:r,y:o},!0);case 7:t.next=22;break;case 9:if("left"!==a){t.next=14;break}return t.next=12,D(n,{x:-r,y:o},!0);case 12:t.next=22;break;case 14:if("up"!==a){t.next=19;break}return t.next=17,D(n,{x:o,y:r},!0);case 17:t.next=22;break;case 19:if("down"!==a){t.next=22;break}return t.next=22,D(n,{x:o,y:-r},!0);case 22:n.style.display="none",l&&l(a);case 24:case"end":return t.stop()}}),t)})))()}}}));var y=r.a.useCallback(function(){var e=Object(s.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.current){e.next=2;break}return e.abrupt("return");case 2:if(d.current=!0,!(Math.abs(n.x)>C||Math.abs(n.y)>C)){e.next=13;break}if(a=j(n),c&&c(a),!o){e.next=13;break}if(m.includes(a)){e.next=13;break}return e.next=10,D(t,n);case 10:return t.style.display="none",l&&l(a),e.abrupt("return");case 13:M(t);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[d,o,c,l,m]),h=r.a.useCallback((function(){d.current=!1}),[d]),x=r.a.useCallback((function(e){if(e){n=e;var t={x:null,y:null},a={x:0,y:0},r={x:0,y:0,time:(new Date).getTime()},o=!1;e.addEventListener("touchstart",(function(e){e.preventDefault(),h(),t={x:-q(e).x,y:-q(e).y}})),e.addEventListener("mousedown",(function(e){e.preventDefault(),o=!0,h(),t={x:-B(e).x,y:-B(e).y}})),e.addEventListener("touchmove",(function(n){n.preventDefault();var o=W(q(n),e,t,r);a=P(r,o),r=o})),e.addEventListener("mousemove",(function(n){if(n.preventDefault(),o){var i=W(B(n),e,t,r);a=P(r,i),r=i}})),e.addEventListener("touchend",(function(t){t.preventDefault(),y(e,a)})),e.addEventListener("mouseup",(function(t){o&&(t.preventDefault(),o=!1,y(e,a))})),e.addEventListener("mouseleave",(function(t){o&&(t.preventDefault(),o=!1,y(e,a))}))}}),[y,h]);return r.a.createElement("div",{ref:x,className:p},i)})),Y=n(92),I=n(86),R=n(84),J=n(83),K=n(89),V=n(36),X=n.n(V),z=n(35),G=n.n(z),H=n(90),$=Object(f.a)((function(e){return{root:{maxWidth:"100%",textAlign:"left",height:e.spacing(80),boxShadow:"rgba(50, 50, 50, 0.08) 6px 8px 10px -3px",display:"flex",flexDirection:"column"},media:{height:e.spacing(50)},cardContent:{display:"flex",flexDirection:"column",justifyContent:"space-between",flexGrow:1},bio:{marginBottom:e.spacing(2)},cardActions:{justifyContent:"space-around",marginBottom:e.spacing(2)}}}));function Q(e){var t,n=e.puppy,a=(e.fetchPuppyData,e.swipe),o=$();return r.a.createElement(Y.a,{className:o.root},r.a.createElement(J.a,{className:o.media,image:"".concat("/puppy-playdate/build","/").concat(n.profilePic),title:n.name}),r.a.createElement("div",{className:o.cardContent},r.a.createElement(R.a,null,r.a.createElement(m.a,{gutterBottom:!0,variant:"h5",component:"h2"},n.name,", ",n.age),r.a.createElement(m.a,{variant:"body1",color:"textSecondary",component:"p",className:o.bio},n.bio),r.a.createElement(m.a,{variant:"body2",color:"textSecondary",component:"p"},r.a.createElement("b",null,"Interests:")," ",null===(t=n.interests)||void 0===t?void 0:t.join(", "))),r.a.createElement(I.a,{className:o.cardActions},r.a.createElement(K.a,{title:"No thanks...","aria-label":"No thanks...",arrow:!0},r.a.createElement(H.a,{"aria-label":"No thanks...",color:"secondary",onClick:function(){return a("left")}},r.a.createElement(G.a,null))),r.a.createElement(K.a,{title:"Yes!","aria-label":"Yes!",arrow:!0},r.a.createElement(H.a,{"aria-label":"Yes!",color:"primary",onClick:function(){return a("right")}},r.a.createElement(X.a,null))))))}var U=Object(f.a)((function(e){return{cardContainer:{position:"relative",display:"flex",justifyContent:"center",margin:"auto",width:e.spacing(75),maxWidth:"100%",height:e.spacing(80)},swipeCard:{position:"absolute",width:e.spacing(75),maxWidth:"100%",height:e.spacing(80)}}})),Z=[],_=function(e){var t=e.puppyData,n=e.fetchPuppyData,o=U(),i=Object(a.useMemo)((function(){return Array(t.length).fill(0).map((function(e){return r.a.createRef()}))}),[t.length]),c=function(e){console.log("swipe",e);var n=t.filter((function(e){return!Z.includes(e.id)}));if(console.log(n),n.length){var a=n[n.length-1].id;console.log(a);var r=t.map((function(e){return e.id})).indexOf(a);console.log(r),Z.push(a),console.log(Z),i[r].current.swipe(e)}};return r.a.createElement("div",{className:o.cardContainer},t.map((function(e,t){return r.a.createElement(F,{className:o.swipeCard,key:e.id,onSwipe:function(t){return n=t,a=e.name,void console.log("swiped ".concat(n," on ").concat(a));var n,a},onCardLeftScreen:function(){return t=e.name,void console.log(t+" left the screen!");var t},ref:i[t]},r.a.createElement(Q,{puppy:e,fetchPuppyData:n,swipe:c}))})))},ee=Object(f.a)((function(e){return{root:{textAlign:"center",color:"#FFF"},header:{marginTop:e.spacing(6),marginBottom:e.spacing(6)},headerText:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}}}));function te(){var e=ee(),t=r.a.useState(null),n=Object(l.a)(t,2),a=n[0],o=n[1],i=r.a.useCallback(Object(s.a)(u.a.mark((function e(){var t,n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("\n  query FetchAllPuppies {\n    queryPuppy {\n      id\n      name\n      age\n      matched\n      profilePic\n      bio\n      interests\n    }\n  }\n","FetchAllPuppies",{});case 2:t=e.sent,n=t.errors,a=t.data,n&&console.error(n),r=a.queryPuppy.sort((function(e,t){return e.name>t.name?-1:1})),o(r);case 8:case"end":return e.stop()}}),e)}))),[]);return r.a.useEffect((function(){i()}),[i]),r.a.createElement("main",{className:e.root},r.a.createElement(p.a,null,r.a.createElement("h1",{className:e.header},r.a.createElement(h.a,null),r.a.createElement("span",{className:e.headerText},"Puppy Playdate"),r.a.createElement(h.a,null)),a?r.a.createElement(_,{puppyData:a,fetchPuppyData:i}):r.a.createElement("div",{className:e.loadingContainer},r.a.createElement(d.a,{color:"inherit",size:60}),r.a.createElement(m.a,{className:e.loadingText},"Loading"))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.66cd3be5.chunk.js.map